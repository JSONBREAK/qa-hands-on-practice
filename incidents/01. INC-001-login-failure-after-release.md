
# üéØ ‡πÇ‡∏à‡∏ó‡∏¢‡πå (INC-001)

>‡∏´‡∏•‡∏±‡∏á deploy ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà  
  **‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡πà‡∏≤ login ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà user ‡πÉ‡∏´‡∏°‡πà login ‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥**

---
## Incident-summary

```

Incident ID: INC-001  
Title: Existing users cannot log in after new release  
Date Detected: 2026-01-xx  
Environment: Production (simulated)  
Severity: High  

What Happened
After deploying version 1.2.0, existing users reported login failures.
Newly registered users were able to log in normally.

Who Was Affected
- Existing users created before version 1.2.0

How Was It Detected
- Reported by customer support
- Increase in login failure rate observed
  
```

---
## Bug Report

```
Title: Login API returns 401 for existing users after v1.2.0 release

Steps to Reproduce
1. Use an existing user account created before v1.2.0
2. Navigate to login page
3. Enter valid credentials
4. Click Login
   
Expected Result
- User should be authenticated and redirected to dashboard
  
Actual Result
- API returns 401 Unauthorized
- User remains on login page
  
Environment
- Chrome 120
- Windows 10
- API v1.2.0
```

---
## Root Cause Analysis

```
Symptom
Existing users receive 401 Unauthorized during login.

Root Cause
Token validation logic introduced in v1.2.0 requires a new field
that is missing in legacy user records.

5 Whys Analysis
Why 1: Why login failed?
- Token validation rejected the payload

Why 2: Why payload was rejected?
- Required field `user_type` was missing

Why 3: Why field was missing?
- Existing user records were not migrated

Why 4: Why migration did not cover existing users?
- Migration script only applied to new registrations

Why 5: Why this was not detected earlier?
- No regression test for legacy users existed
  
```

```
Contributing Factors
- Technical: Missing backward compatibility
- Process: Incomplete migration checklist
- QA Gap: No legacy-user regression coverage
```

---
## Test Cases Added After Incident

```
Test Case ID: TC-INC-001-01
Description:
Verify that users created before v1.2.0 can log in successfully

Type:
Regression

Precondition:
- Existing user record without `user_type` field

Expected Result:
- Login succeeds and token is generated

Linked Incident:
- INC-001
```

---
## Lessons-learned

```
Lessons Learned
- Regression testing must include legacy data scenarios
- API changes should include backward compatibility validation
- Migration scripts require QA review before release
```

---
